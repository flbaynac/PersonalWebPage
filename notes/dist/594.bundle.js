"use strict";(self.webpackChunktagspaces=self.webpackChunktagspaces||[]).push([[594],{12265:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var r=n(85893),a=n(67294),o=n(24011),s=n(72642),i=n(94659),l=n(88979),d=n(77750),c=n(37645),g=n(76446),u=n(3460),T=n(64666),h=n(77957),f=n(14952),p=n(94315),m=n(44187),E=n(51602),j=n(88841),x=n(74008),v=n(19885),y=n(2734),C=n(98396),Z=n(91072),k=n(14021);const S=p.T&&p.T.UI?p.T.UI.GeoTagEditor:a.Fragment,w=p.T&&p.T.UI?p.T.UI.DateTagEditor:a.Fragment;function D(e){const{t}=(0,Z.$G)(),{editTagForEntry:n}=(0,k.A)(),[o,p]=(0,a.useState)(!1),[m,x]=(0,a.useState)(e.selectedTag&&e.selectedTag.title),D=(0,a.useRef)(null),b=(0,a.useMemo)((()=>{let e=!1;if(m&&m.indexOf("-")>-1){const t=m.split("-");if(2===t.length)for(let n=0;n<t.length;n+=1){if(!(0,E.U2)(t[n])){e=!1;break}e=!0}}else e=(0,E.U2)(m);return w&&e}),[]),[F,I]=(0,a.useState)(b),{setError:U,haveError:A}=(0,j.Z)(),{onClose:M,open:P}=e;function O(){(function(){const e=RegExp(/^[^#/\\ [\]]{1,}$/);return m&&e.test(m)?(U("tag",!1),!0):(U("tag"),!1)})()&&!A()&&(n(e.selectedTag.path,e.selectedTag,m),e.onClose())}(0,a.useEffect)((()=>{D&&D.current&&(D.current.value=m)}),[m]);const R=(0,y.Z)(),W=(0,C.Z)(R.breakpoints.down("md"));return(0,r.jsxs)(T.Z,{open:P,fullScreen:W,onClose:M,style:{minWidth:400,height:"100%",marginBottom:30},onKeyDown:e=>{"Enter"!==e.key&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),O())},children:[(0,r.jsxs)(c.Z,{children:[t("core:tagProperties")," ",(0,r.jsx)(v.Z,{testId:"closeEditEntryTagTID",onClose:M})]}),function(){const n=S&&(0,f.tL)(m);return(0,r.jsxs)(d.Z,{"data-tid":"editEntryTagDialog",style:{overflow:"auto"},children:[(0,r.jsxs)(g.Z,{fullWidth:!0,error:A("tag"),children:[(0,r.jsx)(i.Z,{fullWidth:!0,error:A("tag"),disabled:F,inputRef:D,margin:"dense",name:"title",autoFocus:!0,label:t("core:editTag"),onChange:e=>{const{target:t}=e;x(t.value)},defaultValue:m,"data-tid":"editTagEntryDialog_input",InputProps:{endAdornment:(0,r.jsx)(h.Z,{onClick:()=>I(!F)})}}),A("tag")&&(0,r.jsx)(u.Z,{children:t("core:tagTitleHelper")})]}),n&&(0,r.jsx)(S,{geoTag:m,onChange:x,showAdvancedMode:o,geoTaggingFormat:e.geoTaggingFormat,haveError:A,setError:U,tileServer:e.tileServer}),F&&b&&(0,r.jsx)(w,{datePeriodTag:e.selectedTag&&e.selectedTag.title,onChange:x})]})}(),(0,r.jsxs)(l.Z,{style:{justifyContent:"space-between"},children:[S&&(0,f.tL)(m)?(0,r.jsx)(s.Z,{"data-tid":"switchAdvancedModeTID",onClick:()=>p(!o),children:t(o?"core:switchSimpleMode":"core:switchAdvancedMode")}):(0,r.jsx)("div",{}),(0,r.jsxs)("div",{children:[(0,r.jsx)(s.Z,{"data-tid":"closeEditTagEntryDialog",onClick:e.onClose,children:t("core:cancel")}),(0,r.jsx)(s.Z,{disabled:A(),onClick:O,"data-tid":"confirmEditTagEntryDialog",color:"primary",variant:"contained",children:t("core:ok")})]})]})]})}const b=(e,t)=>JSON.stringify(t.selectedTag)===JSON.stringify(e.selectedTag),F=(0,o.$j)((function(e){return{selectedTag:(0,m.h_)(e),selectedEntries:(0,m.lv)(e),tileServer:(0,x.SX)(e),geoTaggingFormat:e.settings.geoTaggingFormat}}))(a.memo(D,b))}}]);
//# sourceMappingURL=594.bundle.js.map